@page "/traces"
@rendermode InteractiveServer
@attribute [StreamRendering]
@using Microsoft.EntityFrameworkCore
@inject SignalsDbContext Db

<PageTitle>Traces</PageTitle>

@if (traces == null)
{
    <progress />
}
else
{
    @foreach (var trace in traces)
    {
        <Span ResourceSpan="trace" />
    }
}

@code {
    private List<ResourceSpan>? traces;

    protected override async Task OnInitializedAsync()
    {
        traces = await Db.ResourceSpans
                         .Include(span => span.Attributes)
                         .Take(10)
                         .ToListAsync();
    }
}